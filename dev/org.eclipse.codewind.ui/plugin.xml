<?xml version="1.0" encoding="UTF-8"?>

<!--
    Copyright (c) 2018, 2019 IBM Corporation and others.
    All rights reserved. This program and the accompanying materials
    are made available under the terms of the Eclipse Public License v2.0
    which accompanies this distribution, and is available at
    http://www.eclipse.org/legal/epl-v20.html

    Contributors:
        IBM Corporation - initial API and implementation
 -->

<plugin>

   	<extension
         point="org.eclipse.ui.preferencePages">
         
         <page id="CodewindParentPage"
         	name="%PREFS_PARENT_PAGE_NAME"
         	class="org.eclipse.codewind.ui.internal.prefs.CodewindPrefsParentPage">
         </page>
         
         <page id="CodewindConnectionsPage"
         	name="%PREFS_CONNECTION_PAGE_NAME"
         	category="CodewindParentPage"
         	class="org.eclipse.codewind.ui.internal.prefs.CodewindConnectionPrefsPage">
         </page>    
   	</extension>

	<extension point="org.eclipse.debug.ui.launchConfigurationTypeImages">
		<launchConfigurationTypeImage
			id="org.eclipse.codewind.core.internal.launchConfigurationTypeImage"
			configTypeID="org.eclipse.codewind.core.internal.launchConfigurationType"
			icon="%DEFAULT_ICON_PATH"/>
	</extension>
	
	<extension point="org.eclipse.debug.ui.launchConfigurationTabGroups">
		<launchConfigurationTabGroup
			id="org.eclipse.codewind.ui.internal.launchConfigTabGroup"
			type="org.eclipse.codewind.core.internal.launchConfigurationType"
			class="org.eclipse.codewind.ui.internal.CodewindLaunchConfigTabGroup"/>
	</extension>

	<!--  Extensions for Codewind Explorer View -->

	<extension point="org.eclipse.ui.views"> 
		<category
			id="org.eclipse.codewind.ui.views"
			name="%CODEWIND_CATEGORY_NAME"/>
		<view
			id="org.eclipse.codewind.ui.explorerView"
			name="%CODEWIND_VIEW_NAME"
			category="org.eclipse.codewind.ui.views"
			allowMultiple="false"
			icon="%DEFAULT_ICON_PATH"
			class="org.eclipse.codewind.ui.internal.views.CodewindExplorerView"/>
	</extension>
	
	<extension point="org.eclipse.ui.navigator.viewer">
		<viewerContentBinding
			viewerId="org.eclipse.codewind.ui.explorerView">
			<includes>
				<contentExtension
					isRoot="true"
					pattern="org.eclipse.codewind.ui.navigatorContent"/>
			</includes>
		</viewerContentBinding>
	</extension>

	<extension point="org.eclipse.ui.navigator.navigatorContent">
		<navigatorContent
			name="%NAVIGATOR_CONTENT_NAME"
			icon="%DEFAULT_ICON_PATH"
			activeByDefault="true"
			contentProvider="org.eclipse.codewind.ui.internal.views.CodewindNavigatorContentProvider"
			labelProvider="org.eclipse.codewind.ui.internal.views.CodewindNavigatorLabelProvider"  
			id="org.eclipse.codewind.ui.navigatorContent"> 
			<enablement>
				<or>
					<instanceof value="org.eclipse.core.resources.IWorkspaceRoot" />
				</or>
			</enablement>
			<actionProvider
				id="org.eclipse.codewind.ui.actionProvider"
				class="org.eclipse.codewind.ui.internal.actions.CodewindActionProvider">
				<enablement>
					<or>
						<instanceof value="org.eclipse.core.resources.IWorkspaceRoot" />
						<adapt type="java.util.Collection">
							<count value="0"/>
						</adapt>
					</or>
				</enablement>
			</actionProvider>
			<actionProvider
				id="org.eclipse.codewind.ui.connectionActionProvider"
				class="org.eclipse.codewind.ui.internal.actions.CodewindConnectionActionProvider">
				<enablement>
					<or>
						<instanceof value="org.eclipse.codewind.core.internal.connection.CodewindConnection" />
					</or>
				</enablement>
			</actionProvider>
			<actionProvider
				id="org.eclipse.codewind.ui.applicationActionProvider"
				class="org.eclipse.codewind.ui.internal.actions.CodewindApplicationActionProvider">
				<enablement>
					<or>
						<instanceof value="org.eclipse.codewind.core.internal.CodewindApplication" />
					</or>
				</enablement>
			</actionProvider>
			<actionProvider
				id="org.eclipse.codewind.ui.logFileActionProvider"
				class="org.eclipse.codewind.ui.internal.actions.LogFileActionProvider">
				<enablement>
					<or>
						<instanceof value="org.eclipse.codewind.core.internal.CodewindApplication" />
					</or>
				</enablement>
			</actionProvider>
		</navigatorContent>
	</extension>

	<extension point="org.eclipse.ui.popupMenus">
		<objectContribution
			id="org.eclipse.codewind.ui.appObjectActions"
			objectClass="org.eclipse.codewind.core.internal.CodewindApplication">
			<action
				id="org.eclipse.codewind.ui.containerShell"
				enablesFor="1"
				menubarPath="group.open"
				label="%ACTION_CONTAINER_SHELL"
				class="org.eclipse.codewind.ui.internal.actions.ContainerShellAction"/>
			<action
				id="org.eclipse.codewind.ui.openAppOverview"
				enablesFor="1"
				menubarPath="group.open"
				icon="%DEFAULT_ICON_PATH"
				label="%ACTION_OPEN_APP_OVERVIEW"
				class="org.eclipse.codewind.ui.internal.actions.OpenAppOverviewAction"/>
			<action
				id="org.eclipse.codewind.ui.openApplication"
				enablesFor="1"
				menubarPath="group.open"
				icon="%OPEN_APP_ICON_PATH"
				label="%ACTION_OPEN_APP"
				class="org.eclipse.codewind.ui.internal.actions.OpenAppAction"/>
			<action
				id="org.eclipse.codewind.ui.importApplication"
				enablesFor="1"
				menubarPath="group.show"
				icon="%IMPORT_ICON_PATH"
				label="%ACTION_IMPORT_PROJECT"
				class="org.eclipse.codewind.ui.internal.actions.ImportProjectAction"/>
			<action
				id="org.eclipse.codewind.ui.restartDebugMode"
				enablesFor="1"
				menubarPath="group.generate"
				icon="%DEBUG_ICON_PATH"
				label="%ACTION_RESTART_DEBUG_MODE"
				class="org.eclipse.codewind.ui.internal.actions.RestartDebugModeAction"/>
			<action
				id="org.eclipse.codewind.ui.restartRunMode"
				enablesFor="1"
				menubarPath="group.generate"
				icon="%RUN_ICON_PATH"
				label="%ACTION_RESTART_RUN_MODE"
				class="org.eclipse.codewind.ui.internal.actions.RestartRunModeAction"/>
			<action
				id="org.eclipse.codewind.ui.enableDisableAutoBuild"
				enablesFor="1"
				menubarPath="group.build"
				label="%ACTION_ENABLE_DISABLE_AUTO_BUILD"
				class="org.eclipse.codewind.ui.internal.actions.EnableDisableAutoBuildAction"/>
			<action
				id="org.eclipse.codewind.ui.buildApplication"
				enablesFor="1"
				menubarPath="group.build"
				icon="%BUILD_ICON_PATH"
				label="%ACTION_START_BUILD"
				class="org.eclipse.codewind.ui.internal.actions.StartBuildAction"/>
			<action
				id="org.eclipse.codewind.ui.refreshApplication"
				enablesFor="1"
				menubarPath="group.additions"
				icon="%REFRESH_ICON_PATH"
				label="%ACTION_REFRESH"
				class="org.eclipse.codewind.ui.internal.actions.RefreshAction"/>
		</objectContribution>
		<objectContribution
			id="org.eclipse.codewind.ui.appObjectActions"
			objectClass="org.eclipse.codewind.core.internal.connection.CodewindConnection">
			<action
				id="org.eclipse.codewind.ui.refreshConnection"
				enablesFor="1"
				menubarPath="group.additions"
				icon="%REFRESH_ICON_PATH"
				label="%ACTION_REFRESH"
				class="org.eclipse.codewind.ui.internal.actions.RefreshAction"/>
			<!--
			<action
				id="org.eclipse.codewind.ui.removeConnection"
				enablesFor="1"
				menubarPath="group.additions"
				label="%ACTION_CONNECTION_REMOVE_CONNECTION"
				class="org.eclipse.codewind.ui.internal.actions.RemoveConnectionAction"/>
			-->
		</objectContribution>
	</extension>

	<extension point="org.eclipse.ui.viewActions">
		<viewContribution
			id="org.eclipse.codewind.ui.explorerViewActions"
			targetID="org.eclipse.codewind.ui.explorerView">
			<action
				id="org.eclipse.codewind.ui.createConnectionAction"
				label="%NEW_CONNECTION_MENU_LABEL"
				menubarPath="group.new"
				toolbarPath="group.new" 
				icon="%DEFAULT_ICON_PATH"
				class="org.eclipse.codewind.ui.internal.actions.CreateConnectionAction">
			</action>
			<action
				id="org.eclipse.codewind.ui.restartRunModeAction"
				label="%ACTION_RESTART_RUN_MODE"
				menubarPath="group.top"
				toolbarPath="group.top" 
				icon="%RUN_ICON_PATH"
				class="org.eclipse.codewind.ui.internal.actions.RestartRunModeAction">
			</action>
			<action
				id="org.eclipse.codewind.ui.restartDebugModeAction"
				label="%ACTION_RESTART_DEBUG_MODE"
				menubarPath="group.top"
				toolbarPath="group.top" 
				icon="%DEBUG_ICON_PATH"
				class="org.eclipse.codewind.ui.internal.actions.RestartDebugModeAction">
			</action>
			<action
				id="org.eclipse.codewind.ui.openApplication"
				label="%ACTION_OPEN_APP"
				menubarPath="group.open"
				toolbarPath="group.open"
				icon="%OPEN_APP_ICON_PATH"
				class="org.eclipse.codewind.ui.internal.actions.OpenAppAction">
			</action>
		</viewContribution>
	</extension>

	<extension point="org.eclipse.ui.newWizards">
		<category
			id = "org.eclipse.codewind.ui.new"
			name="%CODEWIND_CATEGORY_NAME">
		</category>
		<wizard
			id="org.eclipse.codewind.ui.wizards.newConnection"
			name="%NEW_CONNECTION_MENU_LABEL"
			class="org.eclipse.codewind.ui.internal.wizards.NewCodewindConnectionWizard"
			category="org.eclipse.codewind.ui.new"
			icon="%DEFAULT_ICON_PATH">
			<description>%NEW_CONNECTION_DESCRIPTION</description>
			<selection class="org.eclipse.core.resources.IResource"/>
		</wizard>
		<wizard
			id="org.eclipse.codewind.ui.wizards.newProject"
			name="%NEW_PROJECT_MENU_LABEL"
			class="org.eclipse.codewind.ui.internal.wizards.NewCodewindProjectWizard"
			category="org.eclipse.codewind.ui.new"
			project="true"
			icon="%DEFAULT_ICON_PATH">
			<description>%NEW_PROJECT_DESCRIPTION</description>
			<selection class="org.eclipse.core.resources.IResource"/>
		</wizard>
	</extension>
	
	<extension point="org.eclipse.ui.ide.markerResolution">
		<markerResolutionGenerator
			markerType="org.eclipse.codewind.core.validationMarker"
			class="org.eclipse.codewind.ui.internal.marker.CodewindMarkerResolutionGenerator"/>
	</extension>
	
	<extension point="org.eclipse.ui.console.consolePageParticipants">
      <consolePageParticipant
      		id="org.eclipse.codewind.ui.socketConsolePageParticipant"
            class="org.eclipse.codewind.ui.internal.console.SocketConsolePageParticipant">
         <enablement>
            <instanceof value="org.eclipse.codewind.core.internal.console.SocketConsole"/>
         </enablement>
      </consolePageParticipant>
   </extension>
   
	<extension point="org.eclipse.ui.popupMenus">
		<objectContribution
			adaptable="true"
			objectClass="org.eclipse.core.resources.IProject"
			id="org.eclipse.codewind.ui.internal.wizards.bindWizard">
			<menu
				label="%PROJECT_CONTEXT_MENU_NAME"
				path="additions"
				icon="%DEFAULT_ICON_PATH"
				id="org.eclipse.codewind.ui.internal.projectContextMenu">
				<separator
					name="popupActions">
				</separator>
			</menu>
			<action
				label="%BIND_PROJECT_ACTION"
				class="org.eclipse.codewind.ui.internal.actions.BindProjectAction"
				menubarPath="org.eclipse.codewind.ui.internal.projectContextMenu/popupActions"
				icon="%DEFAULT_ICON_PATH"
				id="org.eclipse.codewind.ui.internal.wizards.bindProject">
			</action>
		</objectContribution>
	</extension>
	
	<extension point="org.eclipse.ui.editors">
	    <editor id="org.eclipse.codewind.ui.editors.appOverview"
	        name="Application Overview"
	        icon="icons/codewind.ico"
	        class="org.eclipse.codewind.ui.internal.editors.ApplicationOverviewEditorPart"/>
	</extension>
	
	<extension point="org.eclipse.ui.elementFactories">
		<factory id="org.eclipse.codewind.ui.editors.appOverviewEditorInputFactory"
			class="org.eclipse.codewind.ui.internal.editors.ApplicationOverviewEditorInputFactory"/>
	</extension>
	
	<extension point="org.eclipse.core.contenttype.contentTypes">
		<content-type  
			id="org.eclipse.codewind.ui.editors.cwSettings" 
			name="%CW_SETTINGS_CONTENT_TYPE" 
			base-type="org.eclipse.wst.json.core.jsonsource"
			file-names=".cw-settings">
			<describer class=""/>
		</content-type>
	</extension>

</plugin>
